{"version":3,"file":"static/js/983.363ba07c.chunk.js","mappings":"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","sources":["utils/analytics/loadAnalytics.ts","Landing.tsx","components/version/Version.styles.ts","components/version/Version.tsx","utils/authorityData.ts","pages/start/Start.tsx"],"sourcesContent":["export const loadAnalytics = (tagId: string): void => {\n  let ga = document.createElement(\"script\");\n  ga.type = \"text/javascript\";\n  ga.async = true;\n  ga.src =\n    (\"https:\" === document.location.protocol ? \"https://www\" : \"http://www\") +\n    `.googletagmanager.com/gtag/js?id=${tagId}`;\n  ga.onload = (evt: Event) => {\n    let integration = document.createElement(\"script\");\n    integration.type = \"text/javascript\";\n    integration.innerHTML = `window.dataLayer = window.dataLayer || []; function gtag() {dataLayer.push(arguments);}gtag(\"js\", new Date());gtag(\"config\", \"${tagId}\")`;\n    const s = document.getElementsByTagName(\"script\")[0];\n    s?.parentNode?.insertBefore(integration, s);\n  };\n  const s = document.getElementsByTagName(\"script\")[0];\n  s?.parentNode?.insertBefore(ga, s);\n};\n","import React from \"react\";\nimport { Container, theme as SFTheme } from \"@sfdl/sf-mui-components\";\nimport Start from \"pages/start\";\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\nimport { GatedProps } from \"@sfdl/sf-cookie-gate\";\nimport { Body } from \"@sfdl/sf-mui-components\";\nimport { loadAnalytics } from \"utils/analytics/loadAnalytics\";\nimport Version from \"components/version\";\n\nloadAnalytics(\"G-HQPVH1TXPV\");\n\nconst theme = createTheme(SFTheme);\n\ntype LandingProps = { APIName?: string } & GatedProps;\n\nconst Landing = (props: LandingProps) => {\n  const handleClick = () => {\n    console.log(\"ready to set cookie\");\n    props.setCookieHandler();\n    window.location.reload();\n  };\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Container>\n        <Body title=\"CIN Validator\" chip={props.APIName || \"Sample\"}>\n          <Start onClick={handleClick} />\n        </Body>\n        <Version\n          versionNumber={\n            process.env.REACT_APP_VERSION && process.env.REACT_APP_DATE\n              ? `${process.env.REACT_APP_VERSION} - ${process.env.REACT_APP_DATE}`\n              : \"\"\n          }\n          sourceLink=\"https://github.com/data-to-insight/cin-validator-fe\"\n        />\n      </Container>\n    </ThemeProvider>\n  );\n};\n\nexport default Landing;\n","import styled from \"@emotion/styled\";\nimport { greys } from \"@sfdl/sf-mui-components\";\n\nconst Version = styled.div`\n  position: relative;\n  width: 100%;\n  text-align: center;\n  bottom: 0;\n  right: 0;\n  color: ${greys.mid};\n\n  a {\n    color: ${greys.mid};\n  }\n`;\n\nexport { Version };\n","import React, { PropsWithChildren } from \"react\";\nimport { Version as VersionDiv } from \"./Version.styles\";\nimport { Typography } from \"@mui/material\";\n\ntype VersionProps = {\n  versionNumber: string;\n  sourceLink: string;\n};\n\nconst Version = (props: PropsWithChildren<VersionProps>) => {\n  const { versionNumber, sourceLink } = props;\n\n  return (\n    <VersionDiv>\n      <Typography variant=\"body2\">\n        v{versionNumber} -{\" \"}\n        <a href={sourceLink} target=\"_blank\" rel=\"noreferrer\">\n          {sourceLink}\n        </a>\n      </Typography>\n    </VersionDiv>\n  );\n};\n\nexport default Version;\n","import authorities from \"quality-lac-data-ref-authorities/qlacref_authorities/records.json\";\n\nexport type LaData = {\n  la_id: string;\n  la_name: string;\n};\nexport type LaMap = {\n  [key: string]: LaData;\n};\n\nconst laReducer = (map: LaMap, value: LaData): LaMap => {\n  map[value.la_id] = value;\n  return map;\n};\n\nexport const laMap = authorities\n  .map((x) => {\n    return {\n      la_id: x.UTLA21CD,\n      la_name: x.UTLA21NM,\n    };\n  })\n  .reduce(laReducer, {});\n\nexport const laData = Object.values(laMap).sort((a, b) =>\n  a.la_name > b.la_name ? 1 : -1\n);\n","/** @jsxImportSource @emotion/react */\n\nimport React, { useState } from \"react\";\nimport {\n  Box,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  SelectChangeEvent,\n  Typography,\n  Button,\n  Grid,\n} from \"@mui/material\";\n\nimport { Block } from \"@sfdl/sf-mui-components\";\nimport { laData } from \"utils/authorityData\";\n\ndeclare global {\n  interface Window {\n    _gaq: any;\n  }\n}\n\ninterface StartPageProps {\n  onClick: () => void;\n}\n\nconst Start = (props: StartPageProps) => {\n  const handleButtonClick = () => {\n    try {\n      //@ts-ignore\n      gtag(\"event\", \"cin-la-select\", {\n        localAuthority,\n        localAuthorityName: laData.filter((la) => {\n          return la.la_id === localAuthority;\n        })[0].la_name,\n        event_callback: () => {\n          props.onClick();\n        },\n        debug_mode: true,\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const [localAuthority, setLocalAuthority] = useState<string>(\"\");\n  const renderDropdown = () => {\n    return (\n      <FormControl fullWidth>\n        <InputLabel id=\"la-select-label\">Choose local authority</InputLabel>\n        <Select\n          value={localAuthority}\n          labelId=\"la-select-label\"\n          label=\"Choose local authority\"\n          onChange={(event: SelectChangeEvent) => {\n            console.log(\"set...\");\n            setLocalAuthority(event.target.value as string);\n          }}\n        >\n          {laData.map((laItem) => {\n            return (\n              <MenuItem value={laItem.la_id} key={laItem.la_id}>\n                {laItem.la_name}\n              </MenuItem>\n            );\n          })}\n        </Select>\n      </FormControl>\n    );\n  };\n\n  return (\n    <Box flexGrow={1}>\n      <Block>\n        <Typography variant=\"body1\">\n          Data to Insight is a national project led by local authorities with\n          support from the ADCS, DLUHC, DfE and Ofsted to help local authorities\n          make better use of data.\n        </Typography>\n      </Block>\n\n      <Block>\n        <Typography variant=\"body1\">\n          This tool was developed by local authority data analysts, supported by\n          technical expertise from our friends at Social Finance. It will let\n          you perform the same kinds of data validation as the DfEâ€™s CIN\n          (children in need) statutory data submission tool. You can run this\n          tool at any time, using your year-to-date extract of CIN data. We\n          recommend a monthly data checking cycle.\n        </Typography>\n      </Block>\n\n      <Block spacing={\"blockLarge\"}>\n        <Grid container spacing={2}>\n          <Grid item xs={6}>\n            {renderDropdown()}\n          </Grid>\n        </Grid>\n      </Block>\n\n      <Block spacing={\"blockLarge\"}>\n        <Button\n          onClick={handleButtonClick}\n          variant=\"contained\"\n          sx={{ boxShadow: 0 }}\n          disabled={localAuthority === \"\"}\n        >\n          Start\n        </Button>\n      </Block>\n    </Box>\n  );\n};\n\nexport default Start;\n"],"names":["tagId","ga","document","createElement","type","async","src","location","protocol","onload","evt","integration","innerHTML","s","getElementsByTagName","parentNode","insertBefore","loadAnalytics","theme","createTheme","SFTheme","props","ThemeProvider","title","chip","APIName","onClick","console","log","setCookieHandler","window","reload","versionNumber","process","sourceLink","Version","styled","greys","Typography","variant","href","target","rel","laMap","authorities","x","la_id","UTLA21CD","la_name","UTLA21NM","reduce","map","value","laData","Object","values","sort","a","b","useState","localAuthority","setLocalAuthority","Box","flexGrow","spacing","Grid","container","item","xs","FormControl","fullWidth","InputLabel","id","Select","labelId","label","onChange","event","laItem","MenuItem","Button","gtag","localAuthorityName","filter","la","event_callback","debug_mode","err","sx","boxShadow","disabled"],"sourceRoot":""}